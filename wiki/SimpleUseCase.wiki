#labels Featured
= API use case =

If you've read the [Documentation documentation] but need more guidance on how to make something with the API, here is a short upload and sharing example.
Beware that this example only works with our sandbox. For working with our live soundcloud instance you need to use [http://code.google.com/p/soundcloudapi/source/browse/trunk/ruby/oauth_test_client/soundcloud_oauth_test_client.rb OAuth] for authentication.
 
This is how to do it on the sandbox:

  # Create a private track, this contains information about the track.
  # Upload an asset,  this is the actual audio file.
  # Connect the asset to the track.
  # List your contacts
  # Give your contacts access to the track

== Setup ==

You need a SoundCloud user account to be able to upload files. You're soundcloud.com account is transfered to the sandbox on a weekly basis, if you can't access the sandbox please let us know at api@soundcloud.com

== Here we go ==

=== Create a private track and upload a file ===

Create a private track with title, description and asset data.

{{{
$ curl -u joey:hairspray 'http://api.sandbox-soundcloud.com/tracks' -F track[asset_data]=@superstitious.aif -F track[title]=Superstitious -F track[description]='A song about people.' -F track[sharing]=private

< HTTP/1.1 201 Created
< Location: http://api.sandbox-soundcloud.com/tracks/12
<?xml version="1.0" encoding="UTF-8"?>
<track>
  <id type="integer">13409</id>
  <uri>http://api.sandbox-soundcloud.com/tracks/12</uri>
  <title>Superstitious</title>
  <permalink-url>http://sandbox-soundcloud.com/joey/superstitious</permalink-url>
  <description>A song about people.</description>
  <sharing>private</sharing>
  ...
</track>
}}}

The track's canonical resource is given in the Location response header and in this case it is "http://api.sandbox-soundcloud.com/tracks/12".

The track's id is 12.

=== List your contacts ===

{{{
$ curl -u joey:hairspray 'http://api.sandbox-soundcloud.com/me/contacts'

< HTTP/1.1 200 OK

<?xml version="1.0" encoding="UTF-8"?>
<users>
	<user>
		<id type="integer">3</id>
		<username>vice</username>
		...
	</user>
	<user>
		<id type="integer">4</id>
		<username>mchammer</username>
		...
	</user>
</users>
}}}

There are two contacts, their user ids are 3 and 4.

=== Give your contacts access to the track ===

{{{
$ curl -u joey:hairspray 'http://api.sandbox-soundcloud.com/tracks/12/permissions' -X PUT -H 'Content-Type: application/xml' -d '
<permissions>
	<user-id>3</user-id>
	<user-id>4</user-id>
</permissions>
'
}}}

Now MC Hammer and Vanilla Ice have access to your new track "Superstitious" and can listen to it.