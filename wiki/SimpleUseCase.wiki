#labels Featured
= API use case =

If you've read the [Documentation documentation] but need more guidance on how to make something with the API, here is a short upload and sharing example.

This is how to do it:

  # Create a private track, this contains information about the track.
  # Upload an asset,  this is the actual audio file.
  # Connect the asset to the track.
  # List your contacts
  # Give your contacts access to the track

== Setup ==

You need a SoundCloud user account to be able to upload files. You're soundcloud.com account is transfered to the sandbox on a weekly basis, if you can't access the sandbox please let us know at api@soundcloud.com

== Here we go ==

=== Create a track ===

Create a track with title and description.

{{{
$ curl -u joey:hairspray 'http://api.sandbox-soundcloud.com/tracks' -X POST -H 'Content-Type: application/xml'  -d '
<track>
	<title>Superstitious</title>
	<description>A song about people.</description>
</track>
'

< HTTP/1.1 201 Created
< Location: http://api.sandbox-soundcloud.com/tracks/12
}}}

The track's canonical resource is given in the Location response header and in this case it is "http://api.sandbox-soundcloud.com/tracks/12".

The track's id is 12.

=== Upload an asset ===

Upload the audio file. This should be done by posting the file to the /assets/ resource with content type "multipart/form-data". The file should be added to the request body accordingly. curl does this with the -F switch.

{{{
$ curl -u joey:hairspray 'http://api.sandbox-soundcloud.com/assets' -F asset[filedata]=@superstitious.wav

< HTTP/1.1 201 Created
< Location: http://api.sandbox-soundcloud.com/assets/123
}}}

The asset's canonical resource is given in the Location response header and in this case it is "http://api.sandbox-soundcloud.com/assets/123".

The asset's id is 123.

=== Connect the asset to the track ===

Use the track's id and the asset's id to connect them.

{{{
$ curl -u joey:hairspray 'http://api.sandbox-soundcloud.com/tracks/12/assets/123' -X PUT

< HTTP/1.1 201 Created
}}}

=== List your contacts ===

{{{
$ curl -u joey:hairspray 'http://api.sandbox-soundcloud.com/me/contacts'

< HTTP/1.1 200 OK

<?xml version="1.0" encoding="UTF-8"?>
<users>
	<user>
		<id type="integer">3</id>
		<username>vice</username>
		...
	</user>
	<user>
		<id type="integer">4</id>
		<username>mchammer</username>
		...
	</user>
</users>
}}}

There are two contacts, their user ids are 3 and 4.

=== Give your contacts access to the track ===

{{{
$ curl -u joey:hairspray 'http://api.sandbox-soundcloud.com/tracks/12/permissions' -X PUT -H 'Content-Type: application/xml' -d '
<permissions>
	<user-id>3</user-id>
	<user-id>4</user-id>
</permissions>
'
}}}

Now MC Hammer and Vanilla Ice have access to your new track "Superstitious" and can listen to it.